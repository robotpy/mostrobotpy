strip_prefixes:
- HAL_

functions:
  HAL_SetMain:
    ignore: true # TODO
  HAL_HasMain:
  HAL_RunMain:
    cpp_code: |
      []() {
        {
          nb::gil_scoped_release gil;
          HAL_RunMain();
        }

        // halsim-gui will set the python error indicator if an exception occurs
        if (PyErr_Occurred()) {
          throw nb::python_error();
        }
      }
  HAL_ExitMain:
