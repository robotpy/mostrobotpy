extra_includes:
- nanobind/eigen/dense.h

classes:
  frc::AprilTagDetection:
    methods:
      GetFamily:
      GetId:
      GetHamming:
      GetDecisionMargin:
      GetHomography:
      GetHomographyMatrix:
      GetCenter:
      GetCorner:
      GetCorners:
    inline_code: |
      .def("__repr__", [](const AprilTagDetection &self) {
        return nb::str("<AprilTagDetection tag_family={} tag_id={} hamming={} decision_margin={} center={}>")
          .format(self.GetFamily(), self.GetId(), self.GetHamming(), self.GetDecisionMargin(), self.GetCenter());
      })
  frc::AprilTagDetection::Point:
    attributes:
      x:
      y:
    inline_code: |
      .def("__init__", [](AprilTagDetection::Point *self, double x, double y) {
        new (self) AprilTagDetection::Point{x, y};
      }, nb::arg("x"), nb::arg("y"))
      .def("__len__", [](const AprilTagDetection::Point &self) { return 2; })
      .def("__getitem__", [](const AprilTagDetection::Point &self, int index) {
        switch (index) {
          case 0:
            return self.x;
          case 1:
            return self.y;
          default:
            throw std::out_of_range("AprilTagDetection.Point index out of range");
        }
      })
      .def("__repr__", [](const AprilTagDetection::Point &self) {
        return nb::str("AprilTagDetection.Point(x={}, y={})").format(self.x, self.y);
      })
