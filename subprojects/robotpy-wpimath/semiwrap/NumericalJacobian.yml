extra_includes:
- frc_eigen.h
- wpi/math/linalg/EigenCore.hpp
- pybind11/functional.h
- pybind11/typing.h

functions:
  NumericalJacobian:
    overloads:
      F&&, const Vectord<Cols>&:
        ignore: true
      F&&, const Eigen::VectorXd&:
        template_impls:
        - [std::function<Eigen::VectorXd(Eigen::VectorXd)>]
  NumericalJacobianX:
    overloads:
      F&&, const Vectord<States>&, const Vectord<Inputs>&, Args&&...:
        ignore: true
      F&&, const Eigen::VectorXd&, const Eigen::VectorXd&, Args&&...:
        # template_impls:
        # - ["std::function<Eigen::VectorXd(Eigen::VectorXd, Eigen::VectorXd, py::args)>", py::args, Eigen::MatrixXd]
        param_override:
          args:
            ignore: true
        no_release_gil: true
        cpp_code: |
          [](py::typing::Callable<Eigen::VectorXd(Eigen::VectorXd, Eigen::VectorXd, py::args)> fn,
             const Eigen::VectorXd& x, const Eigen::VectorXd& u, py::args args) {
             return wpi::math::NumericalJacobianX([=](const Eigen::VectorXd &ix, const Eigen::VectorXd &iu) {
                py::object r = fn(ix, iu, *args);
                return r.cast<Eigen::VectorXd>();
             }, x, u);
          }
  NumericalJacobianU:
    overloads:
      F&&, const Vectord<States>&, const Vectord<Inputs>&, Args&&...:
        ignore: true
      F&&, const Eigen::VectorXd&, const Eigen::VectorXd&, Args&&...:
        # template_impls:
        # - ["std::function<Eigen::VectorXd(Eigen::VectorXd, Eigen::VectorXd, py::args)>", py::args, Eigen::MatrixXd]
        param_override:
          args:
            ignore: true
        no_release_gil: true
        cpp_code: |-
          [](py::typing::Callable<Eigen::VectorXd(Eigen::VectorXd, Eigen::VectorXd, py::args)> fn,
             const Eigen::VectorXd& x, const Eigen::VectorXd& u, py::args args) {
             return wpi::math::NumericalJacobianU([=](const Eigen::VectorXd &ix, const Eigen::VectorXd &iu) {
                py::object r = fn(ix, iu, *args);
                return r.cast<Eigen::VectorXd>();
             }, x, u);
          }
